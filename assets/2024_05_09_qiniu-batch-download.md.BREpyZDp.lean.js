import{bQ as i,aM as p,w as e,x as a,J as l,L as t,I as r,aZ as c}from"./chunks/framework.D69h5UT5.js";const y=JSON.parse('{"title":"七牛云图床同步到本地","description":"","frontmatter":{"title":"七牛云图床同步到本地","date":"2024/05/09","tags":["七牛云"]},"headers":[],"relativePath":"2024/05/09/qiniu-batch-download.md","filePath":"2024/05/09/qiniu-batch-download.md","lastUpdated":1737109874000}'),h={name:"2024/05/09/qiniu-batch-download.md"};function o(d,s,b,k,g,u){const n=c("ArticleMetadata");return p(),e("div",{"data-pagefind-body":!0},[s[0]||(s[0]=a("h1",{id:"七牛云图床同步到本地",tabindex:"-1"},[l("七牛云图床同步到本地 "),a("a",{class:"header-anchor",href:"#七牛云图床同步到本地","aria-label":'Permalink to "七牛云图床同步到本地"'},"​")],-1)),t(n,{article:{}}),s[1]||(s[1]=r(`<h2 id="序" tabindex="-1">序 <a class="header-anchor" href="#序" aria-label="Permalink to &quot;序&quot;">​</a></h2><ol><li>在整理七牛云图床的时候，发现 web 端七牛云控制台不能重命名文件夹、不能下载文件夹</li></ol><div class="info custom-block"><p class="custom-block-title">INFO</p><p>尝试过使用 <a href="https://github.com/qiniu/QSunSync?tab=readme-ov-file" target="_blank" rel="noreferrer">七牛云文件同步图形化工具</a>，但它只能上传，不能下载。</p></div><ol start="2"><li><p>七牛云图床的数据备份问题</p></li><li><p>本地管理图床更方便</p></li></ol><p>综上，我调研了一番如何将七牛云图床同步到本地，撰写成此笔记。</p><h2 id="qshell-的下载、配置" tabindex="-1">qshell 的下载、配置 <a class="header-anchor" href="#qshell-的下载、配置" aria-label="Permalink to &quot;qshell 的下载、配置&quot;">​</a></h2><p><a href="https://github.com/qiniu/qshell" target="_blank" rel="noreferrer">qshell</a> 是七牛云 API 的命令行工具。</p><h3 id="_1-下载-qshell" tabindex="-1">1. 下载 qshell <a class="header-anchor" href="#_1-下载-qshell" aria-label="Permalink to &quot;1. 下载 qshell&quot;">​</a></h3><p>在 <a href="https://github.com/qiniu/qshell/releases" target="_blank" rel="noreferrer">Releases</a> 页面下载最新版本的 qshell，解压。</p><h3 id="_2-添加环境变量" tabindex="-1">2. 添加环境变量 <a class="header-anchor" href="#_2-添加环境变量" aria-label="Permalink to &quot;2. 添加环境变量&quot;">​</a></h3><p>为了方便在任何目录下执行 <code>qshell</code> 指令，需要添加 Windows 的环境变量。</p><p>找到了两种方法，分别是 <a href="https://en.wikipedia.org/wiki/Graphical_user_interface" target="_blank" rel="noreferrer">GUI</a> 和 <a href="https://en.wikipedia.org/wiki/Command-line_interface" target="_blank" rel="noreferrer">CLI</a> 。</p><details class="details custom-block"><summary>方法一：GUI</summary><p>① 在 Windows <a href="https://en.wikipedia.org/wiki/Start_menu" target="_blank" rel="noreferrer">开始菜单</a> 界面的搜索栏搜索 <code>env</code><br> ② 点击 <code>编辑账户的环境变量</code><br> ③ 在 <code>用户变量</code> 的 <code>Path</code> 里添加 qshell 的路径，我的是 <code>Y:\\repositories\\Github-Repos\\zip\\qshell</code><br></p><p><img src="https://cdn.jsdelivr.net/gh/tangjan/imgBed/notes/2024/05/09/qiniu-batch-download/1-start-search.png" alt="start-search" data-fancybox="gallery" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/tangjan/imgBed/notes/2024/05/09/qiniu-batch-download/2-env-variables.png" alt="env-variables" data-fancybox="gallery" loading="lazy"></p><p>添加好后，可以重开一个 cmd 测试一下</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>C:\\Users\\salt&gt;qshell -v</span></span>
<span class="line"><span>qshell version v2.14.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><details class="details custom-block"><summary>方法二：CLI</summary><p>使用 <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1" target="_blank" rel="noreferrer">setx</a> 指令可以代替 GUI 添加环境变量。</p><p>但我在执行时出现了 <code>裁断到 1024 字符</code> 的问题。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ setx PATH &quot;%PATH%;Y:\\repositories\\Github-Repos\\zip\\qshell&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>警告: 正保存的数据被裁断到 1024 字符。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>成功: 指定的值已得到保存。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用 GUI 方式已经够用了，就懒得深究了。</p><p>也可以深究、解决这个问题，参考：</p><ul><li><a href="https://www.cnblogs.com/feiquan/p/10468551.html" target="_blank" rel="noreferrer">警告: 正保存的数据被裁断到 1024 字符。 错误: 拒绝访问注册表路径。 - feiquan - 博客园</a></li><li><a href="https://www.cnblogs.com/gkgggq/p/11797382.html" target="_blank" rel="noreferrer">命令行配置 Windows 环境变量报错 - gkgggq - 博客园</a></li></ul></details><details class="details custom-block"><summary>关于 <code>用户变量</code> 和 <code>系统变量</code></summary><p>也可以添加 <code>系统变量</code>，而不是 <code>用户变量</code>，参考：</p><ul><li><a href="https://stackoverflow.com/questions/4477660/what-is-the-difference-between-user-variables-and-system-variables" target="_blank" rel="noreferrer">windows - What is the difference between user variables and system variables? - Stack Overflow</a></li><li><a href="https://learn.microsoft.com/en-us/windows/win32/procthread/environment-variables" target="_blank" rel="noreferrer">Environment Variables - Win32 apps | Microsoft Learn</a></li><li><a href="https://en.wikipedia.org/wiki/Environment_variable" target="_blank" rel="noreferrer">Environment variable - Wikipedia</a></li></ul></details><h3 id="_3-添加密钥" tabindex="-1">3. 添加密钥 <a class="header-anchor" href="#_3-添加密钥" aria-label="Permalink to &quot;3. 添加密钥&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qshell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> account</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AccessKe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SecretKe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>其中 <code>AccessKey</code> 和 <code>SecretKey</code> 在 <a href="https://portal.qiniu.com/developer/user/key" target="_blank" rel="noreferrer">七牛云 - 个人中心 - 密钥管理</a> 界面查询。</p><p>添加好之后可以使用 <code>qshell account</code> 指令确认一下。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ qshell account</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Name: &lt;Your Name&gt;</span></span>
<span class="line"><span>AccessKey: &lt;Your AccessKey&gt;</span></span>
<span class="line"><span>SecretKey: &lt;Your SecretKey&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="图床批量下载脚本" tabindex="-1">图床批量下载脚本 <a class="header-anchor" href="#图床批量下载脚本" aria-label="Permalink to &quot;图床批量下载脚本&quot;">​</a></h2><h3 id="脚本" tabindex="-1">脚本 <a class="header-anchor" href="#脚本" aria-label="Permalink to &quot;脚本&quot;">​</a></h3><p>参考 <a href="https://developer.qiniu.com/kodo/kb/3744/batch-download-and-backup-space" target="_blank" rel="noreferrer">批量下载与空间备份</a> 和 <a href="https://developer.qiniu.com/kodo/1284/list" target="_blank" rel="noreferrer">资源列举</a>，改写了个脚本。</p><details class="details custom-block"><summary><code>qiniu-batch-download.py</code></summary><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qiniu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Auth</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qiniu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BucketManager</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">access_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;**************&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">secret_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;**************&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Auth(access_key, secret_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bucket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BucketManager(q)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bucket_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;******&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prefix </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">marker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">limit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">delimiter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/repositories/qiniu-imgBed/&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ret, eof, info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bucket.list(bucket_name, prefix, marker, limit, delimiter)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ret[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;items&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    base_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://cdn.tangjiayan.com/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(base_url)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(base_url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r.content:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(path, i[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(file_path):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            os.makedirs(os.path.dirname(file_path), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exist_ok</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.write(r.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>***</code> 表示私密信息，不作展示，下同。</p></div></details><p>在运行这个 <code>.py</code> 脚本之前需要安装七牛云的 <a href="https://github.com/qiniu/python-sdk" target="_blank" rel="noreferrer">python-sdk</a>，运行 <code>pip install qiniu</code> 安装即可。</p><p>执行脚本即可批量下载七牛云图床的文件。</p><details class="details custom-block"><summary>执行 <code>qini-batch-download.py</code></summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PS Y:\\repositories\\Github-Repos\\Programming-Practice&gt; &amp; y:/repositories/Github-Repos/Programming-Practice/.venv/Scripts/python.exe y:/repositories/Github-Repos/Programming-Practice/python/hello.py</span></span>
<span class="line"><span>Blog/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/</span></span>
<span class="line"><span>Blog/about-me/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/about-me/</span></span>
<span class="line"><span>Blog/about-me/Optimistic-Nihilism.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/about-me/Optimistic-Nihilism.png</span></span>
<span class="line"><span>Blog/web-open/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/web-open/</span></span>
<span class="line"><span>Blog/web-open/racknerd.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/web-open/racknerd.png</span></span>
<span class="line"><span>Blog/web-open/tencent-cloud.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Blog/web-open/tencent-cloud.png</span></span>
<span class="line"><span>Local-Wordpress/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/</span></span>
<span class="line"><span>Local-Wordpress/1-move-wordpress-to-xampp-folder.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/1-move-wordpress-to-xampp-folder.png</span></span>
<span class="line"><span>Local-Wordpress/2-create-mysql-database.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/2-create-mysql-database.png</span></span>
<span class="line"><span>Local-Wordpress/3-add-mysql-user.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/3-add-mysql-user.png</span></span>
<span class="line"><span>Local-Wordpress/4-set-wordpres-user-privileges.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/4-set-wordpres-user-privileges.png</span></span>
<span class="line"><span>Local-Wordpress/5.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/5.png</span></span>
<span class="line"><span>Local-Wordpress/6.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/6.png</span></span>
<span class="line"><span>Local-Wordpress/7.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/7.png</span></span>
<span class="line"><span>Local-Wordpress/8.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/8.png</span></span>
<span class="line"><span>Local-Wordpress/9.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/9.png</span></span>
<span class="line"><span>Local-Wordpress/XMAPP.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/Local-Wordpress/XMAPP.png</span></span>
<span class="line"><span>bg.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/bg.png</span></span>
<span class="line"><span>gongan.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/gongan.png</span></span>
<span class="line"><span>hover-cite/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/hover-cite/</span></span>
<span class="line"><span>hover-cite/1-wikipedia-hover-cite.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/hover-cite/1-wikipedia-hover-cite.png</span></span>
<span class="line"><span>image/WorkStation.jpg</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/WorkStation.jpg</span></span>
<span class="line"><span>image/linux/linux1/linux1-1.jpg</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-1.jpg</span></span>
<span class="line"><span>image/linux/linux1/linux1-2.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-2.png</span></span>
<span class="line"><span>image/linux/linux1/linux1-3.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-3.png</span></span>
<span class="line"><span>image/linux/linux1/linux1-4.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-4.png</span></span>
<span class="line"><span>image/linux/linux1/linux1-5.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-5.png</span></span>
<span class="line"><span>image/linux/linux1/linux1-6.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/image/linux/linux1/linux1-6.png</span></span>
<span class="line"><span>matlab-jigsaw/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/matlab-jigsaw/</span></span>
<span class="line"><span>notes/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/</span></span>
<span class="line"><span>notes/Cpp/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/Cpp/</span></span>
<span class="line"><span>notes/Cpp/debug/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/Cpp/debug/</span></span>
<span class="line"><span>notes/Cpp/debug/nowcoder-char-array.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/Cpp/debug/nowcoder-char-array.png</span></span>
<span class="line"><span>notes/HTML/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/HTML/</span></span>
<span class="line"><span>notes/HTML/svg-misaligned.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/HTML/svg-misaligned.png</span></span>
<span class="line"><span>notes/common/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/common/</span></span>
<span class="line"><span>notes/common/YUEZHENGLING.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/common/YUEZHENGLING.png</span></span>
<span class="line"><span>notes/common/bitvise-access-denied-solution.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/common/bitvise-access-denied-solution.png</span></span>
<span class="line"><span>notes/common/bitvise-access-denied.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/common/bitvise-access-denied.png</span></span>
<span class="line"><span>notes/common/chara_serika.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/common/chara_serika.png</span></span>
<span class="line"><span></span></span>
<span class="line"><span>……</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div></details><h3 id="文件名引起的一个小错误" tabindex="-1">文件名引起的一个小错误 <a class="header-anchor" href="#文件名引起的一个小错误" aria-label="Permalink to &quot;文件名引起的一个小错误&quot;">​</a></h3><p>在下载过程中出现了一个错误</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Traceback (most recent call last):</span></span>
<span class="line"><span>  File &quot;y:\\repositories\\Github-Repos\\Programming-Practice\\python\\hello.py&quot;, line 34, in &lt;module&gt;</span></span>
<span class="line"><span>    with open(file_path, &quot;wb&quot;) as file:</span></span>
<span class="line"><span>         ^^^^^^^^^^^^^^^^^^^^^</span></span>
<span class="line"><span>OSError: [Errno 22] Invalid argument: &#39;/repositories/qiniu-imgBed/notes/undergraduate/matlab-jigsaw/10*10-jigsaw.png&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>估计是 <code>10*10-jigsaw.png</code> 文件名中含有星号 <code>*</code> 导致的。</p><p>我先在七牛云 web 控制台把 <code>10*10-jigsaw.png</code> 文件名改为 <code>10_10-jigsaw.png</code>。</p><p>然后，虽然中断了下载，但也不应该从头重新下载，浪费时间，也浪费流量。</p><p>根据 <a href="https://developer.qiniu.com/kodo/1284/list" target="_blank" rel="noreferrer">资源列举</a>，<code>marker</code> 参数就是用来记录列举位置的，因此需要查询一下 <code>notes/undergraduate/matlab-jigsaw/</code> 的 <code>marker</code>，以传入到下次的脚本中继续下载。</p><p>又简单写了个脚本以获得 <code>notes/undergraduate/matlab-jigsaw/</code> 的 <code>marker</code></p><details class="details custom-block"><summary><code>get-marker.py</code></summary><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qiniu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Auth</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qiniu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BucketManager</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">access_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;**************&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">secret_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;**************&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">q </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Auth(access_key, secret_key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bucket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BucketManager(q)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ret, eof, info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bucket.list(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*******&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;notes/undergraduate/matlab-jigsaw/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ret)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><p>执行得到结果</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{&#39;marker&#39;: &#39;eyJjIjowLCJrIjoibm90ZXMvdW5kZXJncmFkdWF0ZS9tYXRsYWItamlnc2F3LyJ9&#39;, &#39;items&#39;: [{&#39;key&#39;: &#39;notes/undergraduate/matlab-jigsaw/&#39;, &#39;hash&#39;: &#39;Fto5o-5ea0sNMlW_75VgGJCv2AcJ&#39;, &#39;fsize&#39;: 0, &#39;mimeType&#39;: &#39;application/qiniu-object-manager&#39;, &#39;putTime&#39;: 16942710672072363, &#39;type&#39;: 0, &#39;status&#39;: 0, &#39;md5&#39;: &#39;d41d8cd98f00b204e9800998ecf8427e&#39;}]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后把得到的 <code>marker</code> 传入 <code>qiniu-batch-download.py</code>，再次执行即可</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">marker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;eyJjIjowLCJrIjoibm90ZXMvdW5kZXJncmFkdWF0ZS9tYXRsYWItamlnc2F3LyJ9&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><details class="details custom-block"><summary>再次执行 <code>qiniu-batch-download.py</code></summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PS Y:\\repositories\\Github-Repos\\Programming-Practice&gt; &amp; y:/repositories/Github-Repos/Programming-Practice/.venv/Scripts/python.exe y:/repositories/Github-Repos/Programming-Practice/python/hello.py</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/1-pixel-info.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/1-pixel-info.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/10_10-jigsaw.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/10_10-jigsaw.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/WindowButtonDownFcn.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/WindowButtonDownFcn.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/assuming-drawmap.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/assuming-drawmap.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/axis-on.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/axis-on.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/broken-jigsaw.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/broken-jigsaw.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/click-jigsaw.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/click-jigsaw.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/complete-jigsaw.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/complete-jigsaw.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/cumt-numbering.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/cumt-numbering.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/drawmap.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/drawmap.png</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/shuzi-huarongdao.jpg</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/shuzi-huarongdao.jpg</span></span>
<span class="line"><span>notes/undergraduate/matlab-jigsaw/tic-toc.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/matlab-jigsaw/tic-toc.png</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/yolo-insulator/</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/CBAM.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/yolo-insulator/CBAM.png</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/f1.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/yolo-insulator/f1.png</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/heatmap.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/yolo-insulator/heatmap.png</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/labelImg.png</span></span>
<span class="line"><span>https://cdn.tangjiayan.com/notes/undergraduate/yolo-insulator/labelImg.png</span></span>
<span class="line"><span>notes/undergraduate/yolo-insulator/loss.png</span></span>
<span class="line"><span></span></span>
<span class="line"><span>……</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></details><p>小 功 告 成 ~ ( •̀ ω •́ )✧</p><h2 id="下期预告" tabindex="-1">下期预告 <a class="header-anchor" href="#下期预告" aria-label="Permalink to &quot;下期预告&quot;">​</a></h2><p>《本地图床同步到七牛云》</p>`,44))])}const E=i(h,[["render",o]]);export{y as __pageData,E as default};
