import{_ as l,B as r,c as o,o as i,j as e,G as n,a3 as s,a as d}from"./chunks/framework.NKVwm8Dd.js";const c="/blog/assets/i-Le0biSdfIDe41ud57JdO3CULlMYFUto0iEWRFbwnY.D7FJq0Bl.png",h="/blog/assets/OJwdXLqLlvHkA_IaLlNxeePRvIL5fsUTS0024CvmVCA.Cdkz44-o.png",p="/blog/assets/rhLVQWK5ENmRBRlvUOe1DEfmZ7y-0nBcpgb1vySkA7M.CfUJr6sR.png",b="/blog/assets/IClccRyZV7pHLUArgWqhAh7eBoKEENyA906fpNAUKUU.Lgvzmod2.png",m="/blog/assets/fpa-Yx9N6_VeGenU3NHdcl-hl-j-vr9YnH_0rvgk0xk.D1vDffVr.png",k=JSON.parse('{"title":"vben 框架的示例页面","description":"","frontmatter":{"author":"章家龙","title":"vben 框架的示例页面","date":"2024/11/16","words":633,"duration":4,"categories":["vben"],"tags":["vben"]},"headers":[],"relativePath":"other/vben/rich-text.md","filePath":"other/vben/rich-text.md","lastUpdated":1731744460000}'),g={name:"other/vben/rich-text.md"};function u(_,a,f,x,v,y){const t=r("ArticleMetadata");return i(),o("div",{"data-pagefind-body":!0},[a[0]||(a[0]=e("h1",{id:"vben-框架-更改富文本上传视频",tabindex:"-1"},[d("vben 框架 更改富文本上传视频 "),e("a",{class:"header-anchor",href:"#vben-框架-更改富文本上传视频","aria-label":'Permalink to "vben 框架 更改富文本上传视频"'},"​")],-1)),n(t,{article:{}}),a[1]||(a[1]=s('<p>最近用 vben 框架做项目遇到一个问题，在使用富文本时不支持上传本地视屏。其实富文本一般都是可以支持上传视屏 ，图片的这个框架里封装的富文本组建也是不例外的。 同样是可以上传图片和视屏的，只是不支持上传本地视屏，所以需要稍微的改造一下。</p><h2 id="需求背景" tabindex="-1">需求背景 <a class="header-anchor" href="#需求背景" aria-label="Permalink to &quot;需求背景&quot;">​</a></h2><p>某后台项目，精彩回顾模块 要求富文本记录 xx 活动完成后记录 上传视频，图片，所使用框架含带富文本组件但是只能上传本地图片和线上视频，无法上传本地视频，给用户造成麻烦。</p><h2 id="思路" tabindex="-1">思路 <a class="header-anchor" href="#思路" aria-label="Permalink to &quot;思路&quot;">​</a></h2><p>根据框架原有的富文本组建改造，原框架富文本组件是由文件上传组建和富文本结合而成，只限制了图片的上传，要上传视频就添加上传视频文件的类型 。</p><h2 id="解决步骤" tabindex="-1">解决步骤 <a class="header-anchor" href="#解决步骤" aria-label="Permalink to &quot;解决步骤&quot;">​</a></h2><h3 id="第-1-步" tabindex="-1">第 1 步 <a class="header-anchor" href="#第-1-步" aria-label="Permalink to &quot;第 1 步&quot;">​</a></h3><ul><li>找到项目中组件位置</li></ul><p><img src="'+c+'" alt="image" data-fancybox="gallery" loading="lazy"></p><h3 id="第-2-步" tabindex="-1">第 2 步 <a class="header-anchor" href="#第-2-步" aria-label="Permalink to &quot;第 2 步&quot;">​</a></h3><ul><li>将原组件固定上传文件只有图片的类型改为由配置传入文件类型，默认上传图片类型</li></ul><p><img src="'+h+'" alt="image" data-fancybox="gallery" loading="lazy"></p><p><img src="'+p+'" alt="image" data-fancybox="gallery" loading="lazy"></p><h3 id="第-3-步" tabindex="-1">第 3 步 <a class="header-anchor" href="#第-3-步" aria-label="Permalink to &quot;第 3 步&quot;">​</a></h3><ul><li>在富文本组件中同样传入，默认上传图片</li></ul><p>注：但是这个时候我们会发现上传图片在富文本中可以显示出来，上传视频不显示是什么原因</p><h3 id="第-4-步" tabindex="-1">第 4 步 <a class="header-anchor" href="#第-4-步" aria-label="Permalink to &quot;第 4 步&quot;">​</a></h3><ul><li>由于富文本组件上传图片或者视频的时候被组件内部的方法用标签解析了所以可以展示出来，通过 handleDone 这个方法获取到富文本中的内容，截取出后缀，去判断是图片还是视频然后通过不同的标签去展示出来， 这里注意一下 视频的 video 标签一定要用双标签 否则就会出现上传两个视频时后面的视频不展示的问题 ! ! ! ! ! ! ! ! !</li></ul><p><img src="'+b+'" alt="image" data-fancybox="gallery" loading="lazy"></p><h3 id="第-5-步" tabindex="-1">第 5 步 <a class="header-anchor" href="#第-5-步" aria-label="Permalink to &quot;第 5 步&quot;">​</a></h3><ul><li>我们在图片上传的组件中去配置上传的限制，在页面只使用时对应不同的需求 传入不同的类型 判断是上传图片还是视频，我们通过手动上传的方式去对参数做校验。这里我们通过正则校验，去判断上传递的参数并给出限制大小的判断。</li></ul><p><img src="'+m+'" alt="image" data-fancybox="gallery" loading="lazy"></p><ul><li>实现效果</li></ul>',23))])}const P=l(g,[["render",u]]);export{k as __pageData,P as default};
